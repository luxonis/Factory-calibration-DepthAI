<launch>

  <arg name="square_size_cm"               default="4"/>
  <arg name="marker_size_cm"               default="3.1"/>
  <arg name="squares_x"                    default="22"/>
  <arg name="squares_y"                    default="16"/>
  <arg name="usbMode"                      default="false"/>
  <arg name="calib_path"                   default="/Desktop/calib_files"/>
  <arg name="log_path"                     default="/Desktop/logs"/>
  <arg name="capture_service_name"         default="capture_checkerboard"/>
  <arg name="calibration_service_name"     default="calibrate_stereo"/>
  
  <node 
    name="depthai_calibration"
    pkg="calibration"
    type="depthai_calibration.py"
    respawn="false"
    output="screen"
    required="true">
    
    <param name="package_path"             value="$(find calibration)"/>
    <param name="square_size_cm"           value="$(arg square_size_cm)"/>
    <param name="marker_size_cm"           value="$(arg marker_size_cm)"/>
    <param name="squares_x"                value="$(arg squares_x)"/>
    <param name="squares_y"                value="$(arg squares_y)"/>
    <param name="usbMode"                  value="$(arg usbMode)"/>
    <param name="calib_path"               value="$(arg calib_path)"/>
    <param name="log_path"                 value="$(arg log_path)"/>
    <param name="capture_service_name"     value="$(arg capture_service_name)"/>
    <param name="calibration_service_name" value="$(arg calibration_service_name)"/>
  </node>

  <node name="image_viewer" pkg="rqt_gui" type="rqt_gui" args="--perspective-file $(find calibration)/perspective/image.perspective"/>

</launch> 